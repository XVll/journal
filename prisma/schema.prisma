generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Define Enums
enum TradeAction {
  Buy
  Sell
}

enum TradeDirection {
  Long
  Short
}

enum TradeType {
  Stock
  Option
  Future
  Forex
  Crypto
}

enum TradeStatus {
  Open
  Closed
}

enum TradeResult {
  Win
  Loss
  BreakEven
}

enum ScalingAction {
  Initial
  ScaleIn
  ProfitTaking
  StopLoss
}

// Define Models
model Trade {
  id            String         @id @default(uuid())
  account       String?
  startDate     DateTime
  endDate       DateTime?
  executionTime Int?
  ticker        String
  direction     TradeDirection
  type          TradeType      @default(Stock)
  status        TradeStatus    @default(Open)
  volume        Int            @default(0)
  buyVolume     Int            @default(0)
  sellVolume    Int            @default(0)
  openPosition  Int            @default(0)
  averagePrice  Float          @default(0)
  commission    Float          @default(0)
  fees          Float          @default(0)
  pnl           Float          @default(0)
  result        TradeResult?
  notes         String?
  executions    Execution[]
}

model Execution {
  id            String        @id @default(uuid())
  date          DateTime
  ticker        String
  action        TradeAction
  quantity      Int
  amount        Float
  tradePosition Int
  price         Float
  avgPrice      Float
  scalingAction ScalingAction
  pnl           Float
  trade         Trade         @relation(fields: [tradeId], references: [id])
  tradeId       String
  fees          Float
  type          TradeType?      @default(Stock)
  commission    Float
  addLiquidity  Boolean
  executionHash String
}
